<%@ page language="java" contentType="text/html; charset=EUC-KR"
    pageEncoding="EUC-KR"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core_rt" %>
<%@ taglib prefix="functions" uri="http://java.sun.com/jsp/jstl/functions" %> 
<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
<script type="text/javascript" src=" https://code.jquery.com/jquery-3.5.0.min.js"></script>
<script type="text/javascript">    
     $(function(){
    	$("input#id").focus(function(){
    		//$("div").html('');
    	});
    	
    	$("input[type='button']").click(function(){
    		if($("input#id").val().length==0||$("textarea#contents").val().length==0){
    			$("div").html("<h4>내용을 입력하세요.</h4>");
    			return false;
    		}else{
    			$.ajax({
    				url:'/web/ajaxResult.do?cmd=ajaxResult',
    				dataType:'text',
    				type:'POST',
    				data:$("form").serialize(),
    				//form에있는 모든 데이터 가져오는 방법
    				//data:{id:$("input#id").val(),contents:$("textarea#contents").val()}, 
    				success:function(v){
    					console.log(v);
    					$("form").trigger("reset");
    					//$("div#dvMain").append(v+"<br/>");
    					$(v).each(function(index,dom){
    						alert(dom.no+" "+dom.id);
    					});
    					
    				},error:function(){
    					alert('error');
    				}
    			});
    		}
    	});
     });
</script>
</head>
<body>
	<form action="" name="ajaxCrud">
		<input type="text" id="id" name="id"><input type="button" value="덧글"/><br />
		<textarea row="5" cols="30" id="contents" name="contents"></textarea>
	</form>
	<div id="dvMain"></div>
	
</body>
</html>